#ifndef Thermistor055114_h
#define Thermistor055114_h

#include "Arduino.h"

#define thermistor_pin 0
#define TABLE_SIZE 159

#define THERMISTOR_NUM_SAMPLES 15

class Thermistor055114{
  public:

    Thermistor055114();
    bool update();
    float temperature();
    void set_samples(int n);
    void set_pin(int _pin);

  private:

    uint8_t sample_index = 0;
    int samples[THERMISTOR_NUM_SAMPLES];

    void _calculate_average_adc();
    float _average_adc;

    uint8_t pin = thermistor_pin;

    // lookup table provided for thermistor PN: KS103J2
    const int TABLE[TABLE_SIZE][2] = {
      // ADC, Celsius
      {927, -20},
      {922, -19},
      {917, -18},
      {911, -17},
      {906, -16},
      {900, -15},
      {894, -14},
      {887, -13},
      {880, -12},
      {874, -11},
      {866, -10},
      {859, -9},
      {852, -8},
      {844, -7},
      {836, -6},
      {828, -5},
      {819, -4},
      {810, -3},
      {802, -2},
      {792, -1},
      {783, 0},
      {774, 1},
      {764, 2},
      {754, 3},
      {744, 4},
      {734, 5},
      {724, 6},
      {713, 7},
      {703, 8},
      {692, 9},
      {681, 10},
      {670, 11},
      {659, 12},
      {648, 13},
      {637, 14},
      {625, 15},
      {614, 16},
      {603, 17},
      {591, 18},
      {580, 19},
      {568, 20},
      {557, 21},
      {545, 22},
      {534, 23},
      {523, 24},
      {512, 25},
      {500, 26},
      {489, 27},
      {478, 28},
      {467, 29},
      {457, 30},
      {446, 31},
      {435, 32},
      {425, 33},
      {414, 34},
      {404, 35},
      {394, 36},
      {384, 37},
      {375, 38},
      {365, 39},
      {356, 40},
      {346, 41},
      {337, 42},
      {328, 43},
      {320, 44},
      {311, 45},
      {303, 46},
      {294, 47},
      {286, 48},
      {279, 49},
      {271, 50},
      {263, 51},
      {256, 52},
      {249, 53},
      {242, 54},
      {235, 55},
      {229, 56},
      {222, 57},
      {216, 58},
      {210, 59},
      {204, 60},
      {198, 61},
      {192, 62},
      {187, 63},
      {182, 64},
      {176, 65},
      {171, 66},
      {166, 67},
      {162, 68},
      {157, 69},
      {153, 70},
      {148, 71},
      {144, 72},
      {140, 73},
      {136, 74},
      {132, 75},
      {128, 76},
      {124, 75},
      {121, 76},
      {117, 77},
      {114, 78},
      {111, 79},
      {108, 80},
      {105, 81},
      {102, 82},
      {99, 83},
      {96, 84},
      {93, 85},
      {91, 86},
      {88, 87},
      {86, 88},
      {83, 89},
      {81, 90},
      {79, 91},
      {77, 92},
      {75, 93},
      {73, 94},
      {71, 95},
      {69, 96},
      {67, 97},
      {65, 98},
      {63, 99},
      {62, 100},
      {60, 101},
      {58, 102},
      {57, 103},
      {55, 104},
      {54, 105},
      {52, 106},
      {51, 107},
      {50, 108},
      {48, 109},
      {47, 110},
      {46, 111},
      {45, 112},
      {44, 113},
      {42, 114},
      {41, 115},
      {40, 116},
      {39, 117},
      {38, 118},
      {37, 119},
      {36, 120},
      {36, 121},
      {35, 122},
      {34, 123},
      {33, 124},
      {32, 125},
      {31, 126},
      {31, 127},
      {30, 128},
      {29, 129},
      {28, 130},
      {28, 131},
      {27, 132},
      {26, 133},
      {27, 134},
      {26, 135}
    };

};

#endif
